{% extends "admin/base.html" %}
{% load i18n admin_urls static admin_list %}

{% block extrahead %}
<style>
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes slideInUp {
    from { opacity: 0; transform: translateY(50px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes fadeInRow {
    from { opacity: 0; transform: translateX(-20px); }
    to { opacity: 1; transform: translateX(0); }
}
@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
}
.table-row:hover {
    background: var(--light-beige) !important;
    transform: scale(1.01) !important;
}
.btn-view:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 15px rgba(63, 63, 63, 0.3) !important;
}
</style>
{% endblock %}

{% block content %}
<div style="text-align: center; margin-bottom: 3rem;">
    <h1 style="font-size: 3rem; font-weight: bold; color: var(--black); margin-bottom: 1rem; animation: fadeInUp 0.8s ease-out;">
        Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ({{ cl.result_count }})
    </h1>
    <p style="font-size: 1.25rem; color: var(--medium-gray); animation: fadeInUp 0.8s ease-out 0.2s both;">
        Ø¥Ø¯Ø§Ø±Ø© ÙˆØ¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…
    </p>
</div>

<div style="max-width: 1200px; margin: 0 auto;">
    <div class="card" style="padding: 1.5rem; margin-bottom: 2rem; background: linear-gradient(135deg, var(--light-beige), var(--beige)); border: 1px solid var(--accent-gray); animation: slideInUp 0.6s ease-out 0.2s both;">
        <div style="display: flex; align-items: center; gap: 1rem;">
            <div style="font-size: 2rem;">â„¹ï¸</div>
            <div>
                <h3 style="color: var(--black); margin: 0 0 0.5rem 0; font-weight: 600;">Ù…Ø¹Ù„ÙˆÙ…Ø© Ù…Ù‡Ù…Ø©</h3>
                <p style="color: var(--medium-gray); margin: 0; font-size: 0.95rem;">Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø¹Ø±Ø¶ ÙÙ‚Ø·. Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø¨Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ ÙˆØ§Ù„Ø³Ø­Ø¨.</p>
            </div>
        </div>
    </div>

    <div class="card" style="padding: 2rem; margin-bottom: 2rem; animation: slideInUp 0.6s ease-out 0.3s both;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
            <h2 style="font-size: 2rem; font-weight: bold; color: var(--black); margin: 0;">
                Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
            </h2>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="color: var(--medium-gray); padding: 0.5rem 1rem; background: var(--light-beige); border-radius: 20px; font-weight: 500;">Ø§Ù„Ø¹Ø¯Ø¯: {{ cl.result_count }}</span>
            </div>
        </div>
        
        {% if cl.result_count > 0 %}
        <div style="overflow-x: auto; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);">
            <table style="width: 100%; border-collapse: collapse;">
                <thead style="background: linear-gradient(135deg, #000000, #3F3F3F); color: white;">
                    <tr>
                        <th style="padding: 1.25rem; text-align: right; font-weight: 600; font-size: 0.95rem;">Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨</th>
                        <th style="padding: 1.25rem; text-align: center; font-weight: 600; font-size: 0.95rem;">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>
                        <th style="padding: 1.25rem; text-align: right; font-weight: 600; font-size: 0.95rem;">Ø§Ù„Ù…Ø¨Ù„Øº</th>
                        <th style="padding: 1.25rem; text-align: right; font-weight: 600; font-size: 0.95rem;">Ø§Ù„Ø±ØµÙŠØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©</th>
                        <th style="padding: 1.25rem; text-align: center; font-weight: 600; font-size: 0.95rem;">Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª</th>
                        <th style="padding: 1.25rem; text-align: center; font-weight: 600; font-size: 0.95rem;">Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</th>
                    </tr>
                </thead>
                <tbody>
                    {% for obj in cl.result_list %}
                    <tr class="table-row" style="border-bottom: 1px solid var(--accent-gray); transition: all 0.3s ease; animation: fadeInRow 0.5s ease-out both;">
                        <td style="padding: 1.25rem; color: var(--black); font-weight: 600; font-family: monospace;">{{ obj.account.account_no }}</td>
                        <td style="padding: 1.25rem; text-align: center;">
                            {% if obj.transaction_type == 1 %}
                                <span style="background: linear-gradient(45deg, #10b981, #059669); color: #FFFFFF; padding: 0.4rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 500; box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2); display: inline-flex; align-items: center; gap: 0.5rem;">
                                    <span style="font-size: 1rem;">â¬‡ï¸</span> Ø¥ÙŠØ¯Ø§Ø¹
                                </span>
                            {% else %}
                                <span style="background: linear-gradient(45deg, #CC0000, #FF0000); color: #FFFFFF; padding: 0.4rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 500; box-shadow: 0 2px 8px rgba(204, 0, 0, 0.2); display: inline-flex; align-items: center; gap: 0.5rem;">
                                    <span style="font-size: 1rem;">â¬†ï¸</span> Ø³Ø­Ø¨
                                </span>
                            {% endif %}
                        </td>
                        <td style="padding: 1.25rem; font-weight: 600;">
                            <span style="color: var(--black); background: linear-gradient(45deg, var(--light-beige), var(--beige)); padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.9rem;">
                                {{ obj.amount }} Ø±ÙŠØ§Ù„
                            </span>
                        </td>
                        <td style="padding: 1.25rem; color: var(--black); font-weight: 500;">{{ obj.balance_after_transaction }} Ø±ÙŠØ§Ù„</td>
                        <td style="padding: 1.25rem; color: var(--medium-gray); font-weight: 500; text-align: center; font-family: monospace;">{{ obj.timestamp|date:"Y-m-d H:i" }}</td>
                        <td style="padding: 1.25rem; text-align: center;">
                            <a href="{% url 'admin:transactions_transaction_change' obj.pk %}" 
                               class="btn-view" style="background: linear-gradient(45deg, #3F3F3F, #7F7F7F); color: #FFFFFF; padding: 0.5rem 1rem; border-radius: 20px; text-decoration: none; font-size: 0.8rem; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(63, 63, 63, 0.2); display: inline-flex; align-items: center; gap: 0.5rem;">
                                <span style="font-size: 0.9rem;">ğŸ‘ï¸</span> Ø¹Ø±Ø¶
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="card" style="padding: 3rem; text-align: center; background: linear-gradient(135deg, var(--light-beige), var(--beige)); animation: slideInUp 0.6s ease-out 0.5s both;">
            <div style="font-size: 4rem; margin-bottom: 1.5rem; animation: bounce 2s infinite;">ğŸ’°</div>
            <h3 style="font-size: 1.8rem; margin-bottom: 1rem; color: var(--black); font-weight: 600;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù…Ø§Ù„ÙŠØ©</h3>
            <p style="margin-bottom: 2rem; color: var(--medium-gray); font-size: 1.1rem;">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù…Ø§Ù„ÙŠØ© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
            <p style="color: var(--medium-gray); font-size: 0.95rem;">Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø¨Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹ ÙˆØ§Ù„Ø³Ø­Ø¨.</p>
        </div>
        {% endif %}
    </div>
</div>

{% endblock %}