{% extends "admin/base.html" %}
{% load i18n admin_urls static admin_list %}

{% block extrahead %}
<style>
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes slideInUp {
    from { opacity: 0; transform: translateY(50px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes fadeInRow {
    from { opacity: 0; transform: translateX(-20px); }
    to { opacity: 1; transform: translateX(0); }
}
@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
}
.table-row:hover {
    background: var(--light-beige) !important;
    transform: scale(1.01) !important;
}
.btn-edit:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 15px rgba(63, 63, 63, 0.3) !important;
}
.btn-delete:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 15px rgba(204, 0, 0, 0.3) !important;
}
</style>
{% endblock %}

{% block content %}
<div style="text-align: center; margin-bottom: 3rem;">
    <h1 style="font-size: 3rem; font-weight: bold; color: var(--black); margin-bottom: 1rem; animation: fadeInUp 0.8s ease-out;">
        Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ© ({{ cl.result_count }})
    </h1>
    <p style="font-size: 1.25rem; color: var(--medium-gray); animation: fadeInUp 0.8s ease-out 0.2s both;">
        Ø¥Ø¯Ø§Ø±Ø© ÙˆØ¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…
    </p>
</div>

<div style="max-width: 1200px; margin: 0 auto;">
    <div class="card" style="padding: 2rem; margin-bottom: 2rem; animation: slideInUp 0.6s ease-out 0.3s both;">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
            <h2 style="font-size: 2rem; font-weight: bold; color: var(--black); margin: 0;">
                Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¨Ù†ÙƒÙŠØ©
            </h2>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="color: var(--medium-gray); padding: 0.5rem 1rem; background: var(--light-beige); border-radius: 20px; font-weight: 500;">Ø§Ù„Ø¹Ø¯Ø¯: {{ cl.result_count }}</span>
                {% if has_add_permission %}
                <a href="{% url 'admin:accounts_userbankaccount_add' %}" class="btn-primary" style="padding: 0.75rem 1.5rem; border-radius: 25px; font-weight: 600; text-decoration: none; transition: all 0.3s ease;">
                    Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨ Ø¨Ù†ÙƒÙŠ Ø¬Ø¯ÙŠØ¯
                </a>
                {% endif %}
            </div>
        </div>
        
        {% if cl.result_count > 0 %}
        <div style="overflow-x: auto; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);">
            <table style="width: 100%; border-collapse: collapse;">
                <thead style="background: linear-gradient(135deg, #000000, #3F3F3F); color: white;">
                    <tr>
                        <th style="padding: 1.25rem; text-align: right; font-weight: 600; font-size: 0.95rem;">Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨</th>
                        <th style="padding: 1.25rem; text-align: right; font-weight: 600; font-size: 0.95rem;">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                        <th style="padding: 1.25rem; text-align: right; font-weight: 600; font-size: 0.95rem;">Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨</th>
                        <th style="padding: 1.25rem; text-align: right; font-weight: 600; font-size: 0.95rem;">Ø§Ù„Ø±ØµÙŠØ¯</th>
                        <th style="padding: 1.25rem; text-align: center; font-weight: 600; font-size: 0.95rem;">Ø§Ù„Ø¬Ù†Ø³</th>
                        <th style="padding: 1.25rem; text-align: center; font-weight: 600; font-size: 0.95rem;">ØªØ§Ø±ÙŠØ® Ø£ÙˆÙ„ Ø¥ÙŠØ¯Ø§Ø¹</th>
                        <th style="padding: 1.25rem; text-align: center; font-weight: 600; font-size: 0.95rem;">Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</th>
                    </tr>
                </thead>
                <tbody>
                    {% for obj in cl.result_list %}
                    <tr class="table-row" style="border-bottom: 1px solid var(--accent-gray); transition: all 0.3s ease; animation: fadeInRow 0.5s ease-out both;">
                        <td style="padding: 1.25rem; color: var(--black); font-weight: 600; font-family: monospace;">{{ obj.account_no }}</td>
                        <td style="padding: 1.25rem; color: var(--black); font-weight: 500;">{{ obj.user.email }}</td>
                        <td style="padding: 1.25rem; color: var(--black);">{{ obj.account_type.name }}</td>
                        <td style="padding: 1.25rem; font-weight: 600;">
                            {% if obj.balance > 0 %}
                                <span style="color: var(--black); background: linear-gradient(45deg, var(--light-beige), var(--beige)); padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.9rem;">
                                    {{ obj.balance }} Ø¬Ù†ÙŠÙ‡
                                </span>
                            {% else %}
                                <span style="color: #FFFFFF; background: linear-gradient(45deg, #CC0000, #FF0000); padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.9rem;">
                                    {{ obj.balance }} Ø¬Ù†ÙŠÙ‡
                                </span>
                            {% endif %}
                        </td>
                        <td style="padding: 1.25rem; text-align: center;">
                            {% if obj.gender == 'M' %}
                                <span style="background: linear-gradient(45deg, #3F3F3F, #7F7F7F); color: #FFFFFF; padding: 0.4rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 500; box-shadow: 0 2px 8px rgba(63, 63, 63, 0.2);">Ø°ÙƒØ±</span>
                            {% else %}
                                <span style="background: linear-gradient(45deg, #7F7F7F, #999999); color: #FFFFFF; padding: 0.4rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 500; box-shadow: 0 2px 8px rgba(127, 127, 127, 0.2);">Ø£Ù†Ø«Ù‰</span>
                            {% endif %}
                        </td>
                        <td style="padding: 1.25rem; color: var(--medium-gray); font-weight: 500; text-align: center;">{{ obj.initial_deposit_date|date:"Y-m-d"|default:"-" }}</td>
                        <td style="padding: 1.25rem; text-align: center;">
                            <div style="display: flex; gap: 0.5rem; justify-content: center;">
                                <a href="{% url 'admin:accounts_userbankaccount_change' obj.pk %}" 
                                   class="btn-edit" style="background: linear-gradient(45deg, #3F3F3F, #7F7F7F); color: #FFFFFF; padding: 0.5rem 1rem; border-radius: 20px; text-decoration: none; font-size: 0.8rem; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(63, 63, 63, 0.2);">
                                    ØªØ¹Ø¯ÙŠÙ„
                                </a>
                                <a href="{% url 'admin:accounts_userbankaccount_delete' obj.pk %}" 
                                   class="btn-delete" style="background: linear-gradient(45deg, #CC0000, #FF0000); color: #FFFFFF; padding: 0.5rem 1rem; border-radius: 20px; text-decoration: none; font-size: 0.8rem; font-weight: 500; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(204, 0, 0, 0.2);">
                                    Ø­Ø°Ù
                                </a>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="card" style="padding: 3rem; text-align: center; background: linear-gradient(135deg, var(--light-beige), var(--beige)); animation: slideInUp 0.6s ease-out 0.5s both;">
            <div style="font-size: 4rem; margin-bottom: 1.5rem; animation: bounce 2s infinite;">ğŸ¦</div>
            <h3 style="font-size: 1.8rem; margin-bottom: 1rem; color: var(--black); font-weight: 600;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ø¨Ù†ÙƒÙŠØ©</h3>
            <p style="margin-bottom: 2rem; color: var(--medium-gray); font-size: 1.1rem;">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ø³Ø§Ø¨Ø§Øª Ø¨Ù†ÙƒÙŠØ© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
            <a href="{% url 'admin:accounts_userbankaccount_add' %}" 
               class="btn-primary" style="padding: 1rem 2rem; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 1.1rem; transition: all 0.3s ease;">
                Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨ Ø¨Ù†ÙƒÙŠ Ø¬Ø¯ÙŠØ¯
            </a>
        </div>
        {% endif %}
    </div>

    {% if has_add_permission and cl.result_count > 0 %}
    <div class="card" style="padding: 1.5rem; text-align: center; animation: slideInUp 0.6s ease-out 0.7s both;">
        <a href="{% url 'admin:accounts_userbankaccount_add' %}" 
           class="btn-primary" style="padding: 1rem 2.5rem; border-radius: 25px; text-decoration: none; font-weight: 600; font-size: 1.1rem; transition: all 0.3s ease;">
            Ø¥Ø¶Ø§ÙØ© Ø­Ø³Ø§Ø¨ Ø¨Ù†ÙƒÙŠ Ø¬Ø¯ÙŠØ¯
        </a>
    </div>
    {% endif %}
</div>

{% endblock %}